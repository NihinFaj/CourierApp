{"version":3,"sources":["../../src/pages/viewrequest/viewrequest.module.ts","../../src/pages/viewrequest/viewrequest.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACA;AAUhD;IAAA;IAAoC,CAAC;IAAxB,qBAAqB;QARjC,uEAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,qEAAe;aAChB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,qEAAe,CAAC;aAC1C;SACF,CAAC;OACW,qBAAqB,CAAG;IAAD,4BAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACZQ;AACe;AACa;AACoB;AACA;AACxC;AAElD;;;;;GAKG;AAOH;IAEE,yBAAmB,WAA8B,EAAS,eAAwC,EAAS,eAAwC,EAAS,OAAsB,EAAS,SAAoB,EAAS,SAAoB;QAAzN,gBAAW,GAAX,WAAW,CAAmB;QAAS,oBAAe,GAAf,eAAe,CAAyB;QAAS,oBAAe,GAAf,eAAe,CAAyB;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAS,cAAS,GAAT,SAAS,CAAW;QAQ5O,yBAAoB,GAAG,+EAA+E,CAAC;QAKvG,SAAI,GAAG;YACL,UAAU,EAAE,EAAE;SACf;QACD,UAAK,GAAG;YACN,MAAM,EAAE,EAAE;YACV,SAAS,EAAE,EAAE;SACd;IAlBD,CAAC;IAED,wCAAc,GAAd;QACE,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC3B,CAAC;IAeD,6BAA6B;IACvB,qCAAW,GAAjB;;;;;;wBACE,SAAI;wBAAe,qBAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,uBAAuB,CAAC;;wBAAjF,GAAK,WAAW,GAAG,SAA8D,CAAC;wBAClF,IAAI,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,aAAa,CAAC;wBAClE,OAAO,CAAC,GAAG,CAAC,wBAAwB,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;;;;;KAC9D;IAED,8BAA8B;IACxB,2CAAiB,GAAvB;;;;;4BACe,qBAAM,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,gBAAgB,CAAC;;wBAAhE,MAAM,GAAG,SAAuD;wBACpE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;wBACzC,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;wBACnC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;;;;;KAClC;IAED,0BAA0B;IAC1B,gCAAM,GAAN;QACE,OAAO,CAAC,GAAG,CAAC,0BAA0B,CAAC,CAAC;QACxC,IAAI,CAAC,OAAO,CAAC,GAAG,EAAE,CAAC;IACrB,CAAC;IAED,oBAAoB;IACpB,gCAAM,GAAN;QAAA,iBA2CC;QA1CC,OAAO,CAAC,GAAG,CAAC,oCAAoC,CAAC,CAAC;QAClD,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;aACrB,IAAI,CAAC,UAAC,MAAuB;YAC5B,EAAE,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC;gBACtB,OAAO,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;gBAE7C,IAAI,MAAM,GAAgB,QAAQ,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;gBAEtE,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;gBAEvC,IAAI,SAAO,GAAG,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,SAAS,CAAC,UAAC,IAAY;oBACzD,OAAO,CAAC,GAAG,CAAC,mBAAmB,EAAE,IAAI,CAAC,CAAC;oBACvC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBAClB,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC,CAAC,sBAAsB;oBAC7C,SAAO,CAAC,WAAW,EAAE,CAAC,CAAC,gBAAgB;oBACvC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;oBAC/B,KAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC3B,CAAC,CAAC,CAAC;gBAEH,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC;gBAC9B,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;gBACtB,UAAU,CAAC;oBACX,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;oBAC/B,SAAO,CAAC,WAAW,EAAE,CAAC,CAAC,gBAAgB;oBACvC,MAAM,CAAC,KAAK,CAAC,OAAO,GAAG,OAAO,CAAC;oBAC/B,yCAAyC;oBACzC,KAAI,CAAC,SAAS,CAAC,IAAI,EAAE,CAAC;gBACtB,CAAC,EAAE,KAAK,CAAC,CAAC;gBACV,+EAA+E;YAEjF,CAAC;YAAC,IAAI,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,CAAC;gBACzB,OAAO,CAAC,GAAG,CAAC,0EAA0E,CAAC,CAAC;gBACxF,2CAA2C;gBAC3C,sFAAsF;gBACtF,gDAAgD;YAClD,CAAC;YAAC,IAAI,CAAC,CAAC;gBACN,OAAO,CAAC,GAAG,CAAC,qDAAqD,CAAC,CAAC;gBACnE,gGAAgG;YAClG,CAAC;QACH,CAAC,CAAC;aACD,KAAK,CAAC,UAAC,CAAM;YACZ,cAAO,CAAC,GAAG,CAAC,UAAU,EAAE,CAAC,CAAC;QAA1B,CAA0B,CAAC,CAAC;IAClC,CAAC;IAED,6BAA6B;IAC7B,+CAAqB,GAArB;QAAA,iBAuDC;QArDC,OAAO,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;QAC7B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,cAAc,CAAC,OAAO,CAAC,CAAC;QACzC,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAC;QAC9B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QAE/B,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;YACvB,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;YAChE,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;YAC1B,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,4BAA4B,CAAC,CAAC;YAChE,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,EAAE,EAAC,IAAI,CAAC,cAAc,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;YACpD,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,mDAAmD,CAAC,CAAC;YACvF,OAAO,CAAC,GAAG,CAAC,sBAAsB,CAAC,CAAC;YACpC,MAAM,CAAC,KAAK,CAAC;QACf,CAAC;QAED,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;QAE5C,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAExB,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,OAAO,EAAE,oBAAoB,EAAE,CAAC,CAAC;QAC1E,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;QACvB,IAAI,CAAC,eAAe,CAAC,eAAe,CAAC,IAAI,CAAC,oBAAoB,EAAE,IAAI,CAAC,KAAK,CAAC;aAC1E,IAAI,CAAC,UAAC,MAAW;YAEhB,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YAEtB,EAAE,CAAC,CAAC,MAAM,CAAC,UAAU,IAAI,IAAI,CAAC,CAAC,CAAC;gBAC9B,KAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;gBAE1B,OAAO,CAAC,GAAG,CAAC,2CAA2C,CAAC,CAAC;gBAEzD,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACvC,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;gBAC1B,KAAI,CAAC,eAAe,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;YAClD,CAAC;QAED,CAAC,EAAE,UAAC,GAAQ;YAEZ,KAAI,CAAC,OAAO,CAAC,UAAU,EAAE,CAAC;YACxB,OAAO,CAAC,GAAG,CAAC,wBAAwB,CAAC,CAAC;YACtC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YACjB,KAAI,CAAC,eAAe,CAAC,YAAY,CAAC,6DAA6D,CAAC,CAAC;QACnG,CAAC,CACF,CAAC;IAEF,CAAC;IAlJU,eAAe;QAJ3B,wEAAS,CAAC;YACT,QAAQ,EAAE,kBAAkB;WACG;SAChC,CAAC;wBAG4O;OAFjO,eAAe,CAoJ3B;IAAD,CAAC;AAAA;SApJY,eAAe,e","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ViewrequestPage } from './viewrequest';\n\n@NgModule({\n  declarations: [\n    ViewrequestPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ViewrequestPage),\n  ],\n})\nexport class ViewrequestPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/viewrequest/viewrequest.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';\nimport { SessionproviderProvider } from '../../providers/sessionprovider/sessionprovider';\nimport { CourierproviderProvider } from '../../providers/courierprovider/courierprovider';\nimport { LoadingController } from 'ionic-angular';\n\n/**\n * Generated class for the ViewrequestPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-viewrequest',\n  templateUrl: 'viewrequest.html',\n})\nexport class ViewrequestPage {\n\n  constructor(public loadingCtrl: LoadingController, public courierProvider: CourierproviderProvider, public sessionProvider: SessionproviderProvider, public navCtrl: NavController, public navParams: NavParams, public qrScanner: QRScanner) {\n  }\n\n  ionViewDidLoad() {\n    this.getUserName();\n    this.getRequestDetails();\n  }\n\n  submitRiderPickupURL = 'http://gtmobile.gtbank.com/CourierAPI/api/Courier/submit-rider-pickup-request';\n\n  loading: any;  \n  requestDetails: any;\n  userDetails: any;\n  data = {\n    RiderEmail: \"\"\n  }\n  value = {\n    QrCode: \"\",\n    RiderName: \"\"\n  }\n\n  //Get registered user details\n  async getUserName() {\n    this.userDetails = await this.sessionProvider.getStorage('registeredUserDetails');\n    this.data.RiderEmail = JSON.parse(this.userDetails).Email_Address;  \n    console.log(\"Rider Email Gotten is \" + this.data.RiderEmail); \n  }\n\n  //Get selected request details\n  async getRequestDetails() {\n    var reqDet = await this.sessionProvider.getStorage('requestDetails');\n    this.requestDetails = JSON.parse(reqDet);\n    console.log(\"Request details are\");\n    console.log(this.requestDetails);\n  }\n\n  //Go back to previous page\n  goBack(){\n    console.log(\"Go back to previous page\");\n    this.navCtrl.pop();\n  }\n\n  //Open up QR Scanner\n  scanQR() {\n    console.log(\"Just entered scan QR Code function\");\n    this.qrScanner.prepare()\n      .then((status: QRScannerStatus) => {\n        if (status.authorized) {\n          console.log(\"Camera permisison was granted\");\n                    \n          var ionApp = <HTMLElement>document.getElementsByTagName(\"ion-app\")[0];\n\n          console.log(\"About to start scanning\");\n\n          let scanSub = this.qrScanner.scan().subscribe((text: string) => {\n            console.log('Scanned value is:', text);\n            console.log(text);\n            this.qrScanner.hide(); // hide camera preview\n            scanSub.unsubscribe(); // stop scanning\n            ionApp.style.display = \"block\";\n            this.value.QrCode = text;\n          });\n\n          ionApp.style.display = \"none\";\n          this.qrScanner.show();\n          setTimeout(() => {\n          ionApp.style.display = \"block\";\n          scanSub.unsubscribe(); // stop scanning\n          ionApp.style.display = \"block\";\n          // context.friendAddressInput.setFocus();\n          this.qrScanner.hide();\n          }, 15000);\n          // wait for user to scan something, then the observable callback will be called\n\n        } else if (status.denied) {\n          console.log(\"Camera permission was denied, please use OpenSettings to go grant access\");\n          // camera permission was permanently denied\n          // you must use QRScanner.openSettings() method to guide the user to the settings page\n          // then they can grant the permission from there\n        } else {\n          console.log(\"Camera permission was denied, don't know the reason\");          \n          // permission was denied, but not permanently. You can ask for permission again at a later time.\n        }\n      })\n      .catch((e: any) => \n        console.log('Error is', e));\n  }\n      \n  //Submit request manually    \n  submitRequestManually() {\n\n    console.log(\"Gotten QRCode\");\n    console.log(this.requestDetails.QR_Code);\n    console.log(\"Entered QRCode\");\n    console.log(this.value.QrCode);\n\n    if (!this.value.QrCode) {\n      this.courierProvider.presentAlert(\"Please enter QRCode digits\");\n      return false;\n    }\n\n    if (!this.data.RiderEmail) {\n      this.courierProvider.presentAlert(\"Please Register as a Rider\");\n      return false;\n    }\n\n    if(this.requestDetails.QR_Code != this.value.QrCode) {\n      this.courierProvider.presentAlert(\"QR Code entered doesn't match the request picked.\");\n      console.log(\"QR Codes don't match\");\n      return false;\n    }\n\n    this.value.RiderName = this.data.RiderEmail;\n\n    console.log(this.value);\n\n    this.loading = this.loadingCtrl.create({ content: \"Submitting Request\" });\n    this.loading.present();\n    this.courierProvider.callServicePost(this.submitRiderPickupURL, this.value)\n    .then((result: any) => {\n\n      console.log(result);\n\n    if (result.StatusCode == 1000) {\n      this.loading.dismissAll();\n\n      console.log(\"Rider's update was submitted successfully\");\n\n      this.navCtrl.push(\"SuccesspagePage\");      \n    }\n    else {\n      this.loading.dismissAll();      \n      this.courierProvider.presentAlert(result.Error);\n    }\n\n    }, (err: any) => {\n\n    this.loading.dismissAll();      \n      console.log(\"Call entered exception\");      \n      console.log(err);\n      this.courierProvider.presentAlert(\"Service not available at the moment, please try again later\");      \n    }\n  );\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/viewrequest/viewrequest.ts"],"sourceRoot":""}