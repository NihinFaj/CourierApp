{"version":3,"sources":["../../src/pages/viewrequest/viewrequest.module.ts","../../src/pages/viewrequest/viewrequest.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ViewrequestPage } from './viewrequest';\n\n@NgModule({\n  declarations: [\n    ViewrequestPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ViewrequestPage),\n  ],\n})\nexport class ViewrequestPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/viewrequest/viewrequest.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner';\nimport { SessionproviderProvider } from '../../providers/sessionprovider/sessionprovider';\nimport { CourierproviderProvider } from '../../providers/courierprovider/courierprovider';\nimport { LoadingController } from 'ionic-angular';\n\n/**\n * Generated class for the ViewrequestPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-viewrequest',\n  templateUrl: 'viewrequest.html',\n})\nexport class ViewrequestPage {\n\n  constructor( public loadingCtrl: LoadingController, public courierProvider: CourierproviderProvider, public sessionProvider: SessionproviderProvider, public navCtrl: NavController, public navParams: NavParams, private qrScanner: QRScanner) {\n  }\n\n  ionViewDidLoad() {\n    this.getUserName();\n    this.getRequestDetails();\n  }\n\n  userEmail: any;\n  loading: any;\n  submitRiderPickupURL = 'http://gtmobile.gtbank.com/CourierAPI/api/Courier/submit-rider-pickup-request';\n\n  requestDetails = {};\n\n  value = {\n    QrCode: \"\",\n    RiderName: \"\"\n  }\n\n  scanQR() {\n    this.qrScanner.prepare()\n      .then((status: QRScannerStatus) => {\n        if (status.authorized) {\n          // camera permission was granted\n\n\n          // start scanning\n          let scanSub = this.qrScanner.scan().subscribe((text: string) => {\n            console.log('Scanned something', text);\n\n            this.qrScanner.hide(); // hide camera preview\n            scanSub.unsubscribe(); // stop scanning\n          });\n\n        } else if (status.denied) {\n          // camera permission was permanently denied\n          // you must use QRScanner.openSettings() method to guide the user to the settings page\n          // then they can grant the permission from there\n        } else {\n          // permission was denied, but not permanently. You can ask for permission again at a later time.\n        }\n      })\n      .catch((e: any) => \n        console.log('Error is', e));\n      }\n\n      async getUserName() {\n        var userName = await this.sessionProvider.getStorage('userName');\n        this.userEmail = userName;\n        console.log(this.userEmail);\n        \n      }\n\n      async getRequestDetails() {\n        var reqDet = await this.sessionProvider.getStorage('requestDetails');\n        this.requestDetails = JSON.parse(reqDet);\n        console.log(this.requestDetails);\n      }\n      \n\n  submitRequestManually() {\n\n    if (!this.value.QrCode) {\n      this.courierProvider.presentAlert(\"Please enter QRCode digits\");\n      return false;\n    }\n\n    this.value.RiderName = this.userEmail;\n\n    console.log(this.value);\n\n    this.loading = this.loadingCtrl.create({ content: \"Submitting Request\" });\n    this.loading.present();\n    this.courierProvider.callServicePost(this.submitRiderPickupURL, this.value)\n    .then((result: any) => {\n\n      console.log(result);\n\n    if (result.StatusCode == 1000) {\n      this.loading.dismissAll();\n\n      console.log(\"Rider's update was submitted successfully\");\n\n      this.navCtrl.setRoot(\"SuccesspagePage\");      \n    }\n    else {\n      this.loading.dismissAll();      \n      this.courierProvider.presentAlert(result.Error);\n    }\n\n    }, (err: any) => {\n\n    this.loading.dismissAll();      \n      console.log(\"Call entered exception\");      \n      console.log(err);\n      this.courierProvider.presentAlert(\"Service not available at the moment, please try again later\");      \n    }\n  );\n\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/viewrequest/viewrequest.ts"],"sourceRoot":""}